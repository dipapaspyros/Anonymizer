{% extends "base.html" %}

{% block title %}Access Keys{% endblock %}
{% block content %}
    <h1>Access Keys</h1>

    <p>Here you can manage the available access keys for the <b>{{ configuration.name }}</b> connection.</p>
    <p>You have to provide external parties who want to access data
        through the NTUA Anonymizer API with a valid access key.</p>
    <p>You can disable access keys any time you want.</p>
    <p>You can entirely close this connection by deactivating it from the <a href="/anonymizer/">Home page</a>.</p>

    {% if not configuration.is_active %}
        <p class="o-red">Warning: This connection is deactivated.
            This means that the following access keys can not be used, and no new access keys can be created.
        </p>
    {% endif %}

    {% with access_keys=configuration.access_keys.all %}
        <table class="table">
            <tr>
                <th>Name</th>
                <th>Created</th>
                <th>Key</th>
                <th>Last usage</th>
                <th>Active</th>
                <th>Actions</th>
            </tr>
            {% for access_key in access_keys %}
                <tr>
                    <td>{{ access_key.name }}</td>
                    <td>{{ access_key.created }}</td>
                    <td style="font-family: Inconsolata, monospace;">{{ access_key.key }}</td>
                    <td>
                        {% if access_key.is_active %}
                            <i class="fa fa-check o-green"></i>
                        {% else %}
                            <i class="fa fa-ban o-red"></i>
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
            {% endfor %}
        </table>

        <form method="POST" action=".">{% csrf_token %}
            <p>Are you sure you want to delete {{configuration.name}}? This action can not be undone.</p>

            <a class="btn btn-default" href="/anonymizer/">Cancel</a>
            <input type="submit" class="btn btn-danger" value="Delete" />
        </form>
    {% endwith %}
{% endblock %}